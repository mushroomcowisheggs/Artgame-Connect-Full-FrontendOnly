const translations = {
    en: {
        // Auth Page
        'authTitle': 'ArtGame Connect',
        'authSubtitle': 'Co-Creation Workshop',
        'signIn': 'Sign In',
        'signUp': 'Sign Up',
        'email': 'Email',
        'password': 'Password',
        'enterYourPassword': 'Enter your password',
        'username': 'Username',
        'chooseAUsername': 'Choose a username',
        'atLeast6Characters': 'At least 6 characters',
        'noAccountText': "Don't have an account?",
        'haveAccountText': 'Already have an account?',
        'createAccount': 'Create Account',
        'demoAccountsTitle': 'Demo Accounts (Password: 123456)',
        'loginPageTitle': 'ArtGame Connect - Authentication',
        'loginPlaceholder': 'your@email.com',
        'registerPlaceholder': 'your@email.com',
        'registerUsernamePlaceholder': 'Choose a username',
        'registerPasswordPlaceholder': 'At least 6 characters',
        
        // Index Page
        'indexPageTitle': 'ArtGame Connect - Collaboration Platform',
        'welcomeText': 'Welcome,',
        'switchRoleBtn': 'Switch Role',
        'logoutBtn': 'Logout',
        'tabHome': 'Home',
        'tabProjects': 'Projects',
        'tabMatching': 'Matching',
        'tabWorkbench': 'Workbench',
        'homeTitle': 'Welcome to ArtGame Connect',
        'homeDesc': 'ArtGame Connect is a collaborative creation platform that connects creators with requesters. Switch between roles, publish projects, find matching creators, and collaborate in a structured workbench.',
        'quickStartTitle': 'Quick Start:',
        'qs1': 'Switch to Requester role to publish projects',
        'qs2': 'Switch to Creator role to find and apply for projects',
        'qs3': 'Use the Workbench to collaborate with your partner',
        'newProjectBtn': '+ New Project',
        'loadingProjects': 'Loading projects...',
        'skillSearchLabel': 'Search by Skill Tag:',
        'skillSearchPlaceholder': 'e.g., Illustration, 3D Modeling, Animation',
        'enterSkillTagToSearch': 'Enter a skill tag to search for creators',
        'searchingCreators': 'Searching creators...',
        'noCreatorsFound': 'No creators found with that skill.',
        'viewProfile': 'View Profile',
        'viewProfileNotImplemented': 'View Profile feature is not implemented in this prototype.',
        'loadingWorkbench': 'Loading workbench...',
        'errorLoadingWorkbench': 'Error loading workbench',
        'status': 'Status',
        'budget': 'Budget',
        'skill': 'Skill',
        'milestones': 'Milestones',
        'noMilestones': 'No milestones for this project.',
        'collaborationMessages': 'Collaboration Messages',
        'noMessages': 'No messages yet. Start the conversation!',
        'typeYourMessage': 'Type your message...',
        'send': 'Send',
        'errorLoadingProjects': 'Error loading projects',
        'errorSearchingCreators': 'switchToRequesterRole',
        'switchToRequesterRole': 'Switch to Requester role to create projects',
        'modalTitle': 'Create New Project',
        'projectTitleLabel': 'Project Title',
        'projectTitlePlaceholder': 'e.g., Character Design for Game',
        'projectDescLabel': 'Description',
        'projectDescPlaceholder': 'Describe your project requirements...',
        'projectBudgetLabel': 'Budget ($)',
        'projectSkillLabel': 'Required Skill',
        'projectSkillPlaceholder': 'e.g., Illustration, 3D Modeling',
        'createProjectBtn': 'Create Project',
        'fillInAllFields': 'Please fill in all fields',
        'projectCreatedSuccessfully': 'Project created successfully!',
        'error': 'Error',
        'messageCannotBeEmpty': 'Message cannot be empty',
        'errorSendingMessage': 'Error sending message',
        'confirmLogout': 'Are you sure you want to logout?',
        'roleSwitchedTo': 'Role switched to',
        'errorSwitchingRole': 'Error switching role',
        'unknown': 'Unknown',
        'noProjectsYet': 'No projects yet. Create one to get started!',
    },
    zh: {
        // Auth Page
        'authTitle': '共创者互联工坊',
        'authSubtitle': 'Co-Creation Workshop',
        'signIn': '登录',
        'signUp': '注册',
        'email': '邮箱',
        'password': '密码',
        'enterYourPassword': '请输入密码',
        'username': '用户名',
        'chooseAUsername': '选择一个用户名',
        'atLeast6Characters': '至少6位字符',
        'noAccountText': '还没有账号？',
        'haveAccountText': '已有账号？',
        'createAccount': '创建账号',
        'demoAccountsTitle': '演示账号 (密码: 123456)',
        'loginPageTitle': 'ArtGame Connect - 认证',
        'loginPlaceholder': '您的邮箱',
        'registerPlaceholder': '您的邮箱',
        'registerUsernamePlaceholder': '选择一个用户名',
        'registerPasswordPlaceholder': '至少6位字符',
        
        // Index Page
        'indexPageTitle': 'ArtGame Connect - 协作平台',
        'welcomeText': '欢迎,',
        'switchRoleBtn': '切换角色',
        'logoutBtn': '注销',
        'tabHome': '首页',
        'tabProjects': '项目',
        'tabMatching': '匹配',
        'tabWorkbench': '工作台',
        'homeTitle': '欢迎来到 ArtGame Connect',
        'homeDesc': 'ArtGame Connect 是一个协作创作平台，连接创作者与需求方。您可以在角色间切换，发布项目，寻找匹配的创作者，并在结构化的工作台中进行协作。',
        'quickStartTitle': '快速开始:',
        'qs1': '切换到 需求方 角色以发布项目',
        'qs2': '切换到 创作者 角色以寻找和申请项目',
        'qs3': '使用 工作台 与您的伙伴进行协作',
        'newProjectBtn': '+ 新项目',
        'loadingProjects': '正在加载项目...',
        'skillSearchLabel': '按技能标签搜索:',
        'skillSearchPlaceholder': '例如：插画、3D建模、动画',
        'enterSkillTagToSearch': '输入技能标签以搜索创作者',
        'searchingCreators': '正在搜索创作者...',
        'noCreatorsFound': '未找到具有该技能的创作者。',
        'viewProfile': '查看资料',
        'viewProfileNotImplemented': '此原型中未实现查看资料功能。',
        'loadingWorkbench': '正在加载工作台...',
        'errorLoadingWorkbench': '加载工作台出错',
        'status': '状态',
        'budget': '预算',
        'skill': '技能',
        'milestones': '里程碑',
        'noMilestones': '该项目暂无里程碑。',
        'collaborationMessages': '协作消息',
        'noMessages': '暂无消息。开始对话吧！',
        'typeYourMessage': '输入您的消息...',
        'send': '发送',
        'errorLoadingProjects': '加载项目出错',
        'errorSearchingCreators': '搜索创作者出错',
        'switchToRequesterRole': '请切换到需求方角色以创建项目',
        'modalTitle': '创建新项目',
        'projectTitleLabel': '项目标题',
        'projectTitlePlaceholder': '例如：游戏角色设计',
        'projectDescLabel': '描述',
        'projectDescPlaceholder': '描述您的项目需求...',
        'projectBudgetLabel': '预算 (¥)',
        'projectSkillLabel': '所需技能',
        'projectSkillPlaceholder': '例如：插画、3D建模',
        'createProjectBtn': '创建项目',
        'fillInAllFields': '请填写所有字段',
        'projectCreatedSuccessfully': '项目创建成功！',
        'error': '错误',
        'messageCannotBeEmpty': '消息内容不能为空',
        'errorSendingMessage': '发送消息出错',
        'confirmLogout': '确定要注销吗？',
        'roleSwitchedTo': '角色已切换为',
        'errorSwitchingRole': '切换角色出错',
        'unknown': '未知',
        'noProjectsYet': '暂无项目。创建一个来开始吧！',
    }
};

let currentLang = localStorage.getItem('lang') || 'en';

function getTranslation(key) {
    return translations[currentLang][key] || translations['en'][key] || key;
}

function applyTranslations() {
    // 1. Update text content and placeholders by ID
    const elementsToTranslate = {
        // Auth Page
        'pageTitle': { type: 'title', key: 'loginPageTitle' },
        'authTitle': { type: 'text', key: 'authTitle' },
        'authSubtitle': { type: 'text', key: 'authSubtitle' },
        'loginHeader': { type: 'text', key: 'signIn' },
        'registerHeader': { type: 'text', key: 'signUp' },
        'loginTab': { type: 'text', key: 'signIn' },
        'registerTab': { type: 'text', key: 'signUp' },
        'loginEmailLabel': { type: 'text', key: 'email' },
        'loginPasswordLabel': { type: 'text', key: 'password' },
        'loginBtn': { type: 'text', key: 'signIn' },
        'registerUsernameLabel': { type: 'text', key: 'username' },
        'registerEmailLabel': { type: 'text', key: 'email' },
        'registerPasswordLabel': { type: 'text', key: 'password' },
        'registerBtn': { type: 'text', key: 'createAccount' },
        'noAccountText': { type: 'text', key: 'noAccountText' },
        'showRegisterLink': { type: 'text', key: 'signUp' },
        'haveAccountText': { type: 'text', key: 'haveAccountText' },
        'showLoginLink': { type: 'text', key: 'signIn' },
        'demoAccountsTitle': { type: 'text', key: 'demoAccountsTitle' },
        'login-email': { type: 'placeholder', key: 'loginPlaceholder' },
        'login-password': { type: 'placeholder', key: 'enterYourPassword' },
        'register-username': { type: 'placeholder', key: 'registerUsernamePlaceholder' },
        'register-email': { type: 'placeholder', key: 'registerPlaceholder' },
        'register-password': { type: 'placeholder', key: 'registerPasswordPlaceholder' },
        
        // Index Page
        'indexPageTitle': { type: 'title', key: 'indexPageTitle' },
        'headerLogo': { type: 'text', key: 'authTitle' },
        'welcomeText': { type: 'text', key: 'welcomeText' },
        'switchRoleBtn': { type: 'text', key: 'switchRoleBtn' },
        'logoutBtn': { type: 'text', key: 'logoutBtn' },
        'tabHome': { type: 'text', key: 'tabHome' },
        'tabProjects': { type: 'text', key: 'tabProjects' },
        'tabMatching': { type: 'text', key: 'tabMatching' },
        'tabWorkbench': { type: 'text', key: 'tabWorkbench' },
        'homeTitle': { type: 'text', key: 'homeTitle' },
        'homeDesc': { type: 'text', key: 'homeDesc' },
        'quickStartTitle': { type: 'text', key: 'quickStartTitle' },
        'qs1': { type: 'text', key: 'qs1' },
        'qs2': { type: 'text', key: 'qs2' },
        'qs3': { type: 'text', key: 'qs3' },
        'newProjectBtn': { type: 'text', key: 'newProjectBtn' },
        'skillSearchLabel': { type: 'text', key: 'skillSearchLabel' },
        'skillSearch': { type: 'placeholder', key: 'skillSearchPlaceholder' },
        'modalTitle': { type: 'text', key: 'modalTitle' },
        'projectTitleLabel': { type: 'text', key: 'projectTitleLabel' },
        'projectTitle': { type: 'placeholder', key: 'projectTitlePlaceholder' },
        'projectDescLabel': { type: 'text', key: 'projectDescLabel' },
        'projectDescription': { type: 'placeholder', key: 'projectDescPlaceholder' },
        'projectBudgetLabel': { type: 'text', key: 'projectBudgetLabel' },
        'projectSkillLabel': { type: 'text', key: 'projectSkillLabel' },
        'projectSkill': { type: 'placeholder', key: 'projectSkillPlaceholder' },
        'createProjectBtn': { type: 'text', key: 'createProjectBtn' },
        'sendMessageBtn': { type: 'text', key: 'send' },
    };

    for (const id in elementsToTranslate) {
        const element = document.getElementById(id);
        if (element) {
            const { type, key } = elementsToTranslate[id];
            const translation = getTranslation(key);
            
            if (type === 'title') {
                document.title = translation;
            } else if (type === 'text') {
                // For buttons, labels, headers
                element.textContent = translation;
            } else if (type === 'placeholder') {
                // For input fields
                element.placeholder = translation;
            }
        }
    }
    
    // Update language toggle button text
    const langToggleBtn = document.getElementById('langToggleBtn');
    if (langToggleBtn) {
        langToggleBtn.textContent = currentLang === 'en' ? '中文' : 'English';
    }
}

function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'zh' : 'en';
    localStorage.setItem('lang', currentLang);
    applyTranslations();
    // Re-render dynamic content if needed (e.g., project list, workbench)
    if (typeof loadProjects === 'function') loadProjects();
    if (typeof loadWorkbench === 'function' && currentProject) loadWorkbench(currentProject);
}

function loadLanguage() {
    applyTranslations();
}
