<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtGame Connect MVP</title>
    <link rel="stylesheet" href="./assets/css/modern.css">
    <link rel="stylesheet" href="./assets/css/index.css">
</head>
<body>
    <!-- Header with Three Navigation Rows -->
    <header class="header-nav">
        <!-- Row 1: User Actions -->
        <div class="nav-row-user">
            <div class="user-info" style="display:flex;align-items:center;gap:10px;">
                <img id="userAvatar" src="./assets/images/avatar_32.png" alt="avatar" style="width:36px;height:36px;border-radius:50%;object-fit:cover;">
                <div style="display:flex;align-items:center;gap:6px;">
                    <span data-i18n="welcome">Welcome, </span>
                    <strong id="username">User</strong>
                    <span class="role-badge" id="roleDisplay">Creator</span>
                </div>
            </div>
            
            <div class="user-actions">
                <button class="btn btn-secondary btn-small" onclick="switchRole()" data-i18n="switchRole">Switch Role</button>
                <button class="btn btn-secondary btn-small" onclick="logout()" data-i18n="logout">Logout</button>
                <button class="btn btn-secondary btn-small" onclick="toggleLanguage()" id="langToggleBtn">中文</button>
            </div>
        </div>
        
        
        <!-- Row 2: Main Navigation -->
        <div class="nav-row-main">
            <button class="nav-btn active" onclick="switchTab('home')" id="nav-home" data-i18n="home">Home</button>
            <button class="nav-btn" onclick="switchTab('plaza')" id="nav-plaza" data-i18n="plaza">Plaza</button>
            <button class="nav-btn" onclick="switchTab('messages')" id="nav-messages" data-i18n="messages">Messages</button>
            <button class="nav-btn" onclick="switchTab('profile')" id="nav-profile" data-i18n="profile">Profile</button>
        </div>
        
        <!-- Row 3: Secondary Navigation -->
        <div class="nav-row-sub">
            <button class="nav-btn" onclick="switchTab('taskmarket')" id="nav-taskmarket" data-i18n="taskMarket">TaskMarket</button>
            <button class="nav-btn" onclick="switchTab('project')" id="nav-project" data-i18n="project">Project</button>
            <button class="nav-btn" onclick="switchTab('matching')" id="nav-matching" data-i18n="matching">Matching</button>
            <button class="nav-btn" onclick="switchTab('workbench')" id="nav-workbench" data-i18n="workBench">WorkBench</button>
        </div>
    </header>
    
    <!-- Main Content -->
    <div class="main-container">
        <!-- Home Tab -->
        <div id="home" class="tab-content active">
            <div class="card">
                <h2 data-i18n="homeTitle">Welcome to ArtGame Connect</h2>
                <p style="color: #666; line-height: 1.6; margin-bottom: 16px;" data-i18n="homeDesc">
                    A creative collaboration platform integrating project marketplace, activity plaza, messaging system, personal center, collaboration workbench, and creator matching.
                </p>
                <div style="padding: 16px; background: #f0f7ff; border-radius: 8px; border-left: 4px solid #667eea;">
                    <strong data-i18n="quickStart">Quick Start:</strong>
                    <ul style="margin-top: 8px; margin-left: 20px; color: #666;">
                        <li data-i18n="quickStartRow1">Row 1: Home, Plaza, Messages, Profile</li>
                        <li data-i18n="quickStartRow2">Row 2: TaskMarket, Project, Matching, WorkBench</li>
                        <li data-i18n="quickStartRow3">Row 3: Creator, Switch Role, Logout, Language</li>
                        <li data-i18n="quickStartTip">Switch to Requester role to publish projects, switch to Creator role to apply for projects</li>
                    </ul>
                </div>
                <!-- Static carousel card placed on Home page -->
                <div class="card" style="margin-bottom:16px;">
                    <h3 style="margin-bottom:12px;">Highlights</h3>
                    <div class="carousel-container" style="display:flex;align-items:center;gap:12px;">
                        <button id="carousel-prev" class="btn btn-secondary btn-small" aria-label="Previous">◀</button>
                        <div class="carousel-track-wrapper" style="overflow:hidden;flex:1;border-radius:8px;">
                            <div id="carousel-track" style="display:flex;transition:transform 0.35s ease;">
                                <img src="./assets/images/slide1.png" class="carousel-slide" alt="slide1" style="width:100%;flex:0 0 100%;object-fit:cover;border-radius:8px;">
                                <img src="./assets/images/slide2.png" class="carousel-slide" alt="slide2" style="width:100%;flex:0 0 100%;object-fit:cover;border-radius:8px;">
                                <img src="./assets/images/slide3.png" class="carousel-slide" alt="slide3" style="width:100%;flex:0 0 100%;object-fit:cover;border-radius:8px;">
                                <img src="./assets/images/slide4.png" class="carousel-slide" alt="slide4" style="width:100%;flex:0 0 100%;object-fit:cover;border-radius:8px;">
                                <img src="./assets/images/slide5.png" class="carousel-slide" alt="slide5" style="width:100%;flex:0 0 100%;object-fit:cover;border-radius:8px;">
                            </div>
                        </div>
                        <button id="carousel-next" class="btn btn-secondary btn-small" aria-label="Next">▶</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Plaza Tab -->
        <div id="plaza" class="tab-content">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
                    <h2 data-i18n="plazaTitle">Activity Plaza</h2>
                    <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                        <select id="viewSelect" aria-label="Filter activities by view" onchange="loadFeed()">
                            <option value="all" data-i18n="all">All</option>
                            <option value="recommend" data-i18n="recommend">Recommend</option>
                            <option value="following" data-i18n="following">Following</option>
                        </select>
                        <select id="sortSelect" aria-label="Sort activities by option" onchange="loadFeed()">
                            <option value="new" data-i18n="newest">Newest</option>
                            <option value="hot" data-i18n="hottest">Hottest</option>
                        </select>
                        <button class="btn btn-primary" onclick="openActivityModal()" data-i18n="newActivity">+ New Activity</button>
                    </div>
                </div>
                <div id="feed-list" class="loading" data-i18n="loadingActivities">Loading activities...</div>
            </div>
        </div>
        
        <!-- Messages Tab -->
        <div id="messages" class="tab-content">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 data-i18n="messagesTitle">Messages</h2>
                    <button class="btn btn-primary" onclick="openMessageModal()" data-i18n="addNewMessage">Add New Message</button>
                </div>
                <div id="messages-list" class="loading" data-i18n="loadingMessages">Loading messages...</div>
            </div>
        </div>
        
        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <div class="card">
                <h2 data-i18n="profileTitle">Profile</h2>
                <div id="profile-content" class="loading" data-i18n="loadingProfile">Loading profile...</div>
            </div>
        </div>
        
        <!-- TaskMarket Tab -->
        <div id="taskmarket" class="tab-content">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 data-i18n="taskMarketTitle">Task Market</h2>
                    <button class="btn btn-primary" onclick="openCreateProjectModal()" data-i18n="createProject">Create Project</button>
                </div>
                <div id="projects-list" class="loading" data-i18n="loading">Loading...</div>
            </div>
        </div>
        
        <!-- Project Details Tab -->
        <div id="project" class="tab-content">
            <div class="card">
                <h2 data-i18n="projectDetailsTitle">Project Details</h2>
                <div id="project-details" class="loading" data-i18n="loading">Loading...</div>
            </div>
        </div>
        
        <!-- Matching Tab -->
        <div id="matching" class="tab-content">
            <div class="card">
                <h2 data-i18n="matchingTitle">Creator Matching</h2>
                <div style="margin-bottom: 20px;">
                    <input type="text" id="skillSearchInput" placeholder="Search by skill..." style="padding: 10px; border: 1px solid #ddd; border-radius: 6px; width: 100%; max-width: 400px;">
                    <button class="btn btn-primary" onclick="searchCreators()" style="margin-left: 8px;" data-i18n="search">Search</button>
                </div>
                <div id="creators-list" class="loading" data-i18n="loading">Loading...</div>
            </div>
        </div>
        
        <!-- WorkBench Tab -->
        <div id="workbench" class="tab-content">
            <div class="card">
                <h2 data-i18n="workBenchTitle">Work Bench</h2>
                <div id="workbench-content">
                    <div id="workbench-project-list"></div>
                    <div id="workbench-detail" style="display:none;">
                        <div style="margin-bottom:16px;">
                            <button class="btn btn-secondary btn-small" onclick="backToProjectList()" data-i18n="backToProjectList">← Back to Project List</button>
                        </div>
                        <div id="workbench-project-info" style="margin-bottom:20px;"></div>
                        
                        <!-- 里程碑看板 -->
                        <div id="milestone-board" style="margin-bottom:24px;">
                            <h3 data-i18n="milestonesBoard">Milestones Board</h3>
                            <div class="milestone-columns" style="display:flex;gap:16px;overflow-x:auto;padding:16px 0;">
                                <div class="milestone-column" data-stage="planning">
                                    <div class="milestone-column-header">
                                        <h4 data-i18n="stagePlanning">Planning</h4>
                                        <span class="milestone-count" id="count-planning">0</span>
                                    </div>
                                    <div class="milestone-cards" id="cards-planning" data-stage="planning"></div>
                                </div>
                                <div class="milestone-column" data-stage="in_progress">
                                    <div class="milestone-column-header">
                                        <h4 data-i18n="stageInProgress">In Progress</h4>
                                        <span class="milestone-count" id="count-in_progress">0</span>
                                    </div>
                                    <div class="milestone-cards" id="cards-in_progress" data-stage="in_progress"></div>
                                </div>
                                <div class="milestone-column" data-stage="review">
                                    <div class="milestone-column-header">
                                        <h4 data-i18n="stageReview">Under Review</h4>
                                        <span class="milestone-count" id="count-review">0</span>
                                    </div>
                                    <div class="milestone-cards" id="cards-review" data-stage="review"></div>
                                </div>
                                <div class="milestone-column" data-stage="completed">
                                    <div class="milestone-column-header">
                                        <h4 data-i18n="stageCompleted">Completed</h4>
                                        <span class="milestone-count" id="count-completed">0</span>
                                    </div>
                                    <div class="milestone-cards" id="cards-completed" data-stage="completed"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 聊天区域 -->
                        <div id="workbench-chat-section">
                            <h3 data-i18n="projectChat">Project Chat</h3>
                            <div id="workbench-messages" style="max-height:400px;overflow-y:auto;margin-bottom:16px;padding:16px;background:#f9f9f9;border-radius:8px;"></div>
                            <div style="display:flex;gap:8px;">
                                <input type="text" id="workbench-message-input" placeholder="Type your message..." data-i18n-placeholder="typeMessage" style="flex:1;padding:10px;border:1px solid #ddd;border-radius:6px;">
                                <button class="btn btn-primary" onclick="sendProjectMessage()" data-i18n="send">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Activity Modal -->
    <div id="activityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="postActivity">Post Activity</h3>
                <button class="modal-close" onclick="closeActivityModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="activityTitle">Title</label>
                    <input type="text" id="activityTitle" placeholder="Enter title...">
                </div>
                <div class="form-group">
                    <label data-i18n="activityContent">Content</label>
                    <textarea id="activityContent" placeholder="What's on your mind?"></textarea>
                </div>
                <div class="form-group">
                    <label data-i18n="activityImage">Image URL (optional)</label>
                    <input type="text" id="activityImage" placeholder="https://...">
                </div>
                <div style="display: flex; gap: 8px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="closeActivityModal()" data-i18n="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="submitActivity()" data-i18n="submit">Submit</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Message Modal -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="addNewMessage">Add New Message</h3>
                <button class="modal-close" onclick="closeMessageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="messageContent">Message Content</label>
                    <textarea id="messageContent" placeholder="Enter your message..."></textarea>
                </div>
                <div style="display: flex; gap: 8px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="closeMessageModal()" data-i18n="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="submitMessage()" data-i18n="postMessage">Post Message</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Project Modal -->
    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="createProject">Create Project</h3>
                <button class="modal-close" onclick="closeCreateProjectModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="projectTitle">Project Title</label>
                    <input type="text" id="projectTitle" placeholder="Enter project title...">
                </div>
                <div class="form-group">
                    <label data-i18n="projectDescription">Description</label>
                    <textarea id="projectDescription" placeholder="Describe your project..."></textarea>
                </div>
                <div class="form-group">
                    <label data-i18n="budget">Budget</label>
                    <input type="number" id="projectBudget" placeholder="Enter budget...">
                </div>
                <div class="form-group">
                    <label data-i18n="tags">Skills Required</label>
                    <input type="text" id="projectSkills" placeholder="e.g., Illustration, 3D Modeling">
                </div>
                <div style="display: flex; gap: 8px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="closeCreateProjectModal()" data-i18n="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="submitProject()" data-i18n="submit">Submit</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- File Upload Modal -->
    <div id="fileUploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="uploadFiles">Upload Files</h3>
                <button class="modal-close" onclick="closeFileUploadModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="selectFiles">Select Files</label>
                    <input type="file" id="milestoneFiles" multiple style="padding:10px;border:1px solid #ddd;border-radius:6px;width:100%;">
                </div>
                <div id="file-list" style="margin-top:12px;"></div>
                <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
                    <button class="btn btn-secondary" onclick="closeFileUploadModal()" data-i18n="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="submitFiles()" data-i18n="upload">Upload</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Project Review Modal -->
    <div id="projectReviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="submitProjectReview">Submit Project Review</h3>
                <button class="modal-close" onclick="closeProjectReviewModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="overallRating">Overall Rating</label>
                    <div id="rating-stars" style="display:flex;gap:8px;font-size:32px;margin-bottom:12px;">
                        <span class="star" data-rating="1" onclick="setRating(1)">☆</span>
                        <span class="star" data-rating="2" onclick="setRating(2)">☆</span>
                        <span class="star" data-rating="3" onclick="setRating(3)">☆</span>
                        <span class="star" data-rating="4" onclick="setRating(4)">☆</span>
                        <span class="star" data-rating="5" onclick="setRating(5)">☆</span>
                    </div>
                </div>
                <div class="form-group">
                    <label data-i18n="communicationRating">Communication</label>
                    <select id="communicationRating" style="padding:10px;border:1px solid #ddd;border-radius:6px;width:100%;">
                        <option value="5">5 - Excellent</option>
                        <option value="4">4 - Good</option>
                        <option value="3" selected>3 - Average</option>
                        <option value="2">2 - Below Average</option>
                        <option value="1">1 - Poor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-i18n="qualityRating">Quality</label>
                    <select id="qualityRating" style="padding:10px;border:1px solid #ddd;border-radius:6px;width:100%;">
                        <option value="5">5 - Excellent</option>
                        <option value="4">4 - Good</option>
                        <option value="3" selected>3 - Average</option>
                        <option value="2">2 - Below Average</option>
                        <option value="1">1 - Poor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-i18n="timelinessRating">Timeliness</label>
                    <select id="timelinessRating" style="padding:10px;border:1px solid #ddd;border-radius:6px;width:100%;">
                        <option value="5">5 - Excellent</option>
                        <option value="4">4 - Good</option>
                        <option value="3" selected>3 - Average</option>
                        <option value="2">2 - Below Average</option>
                        <option value="1">1 - Poor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-i18n="reviewComment">Review Comment</label>
                    <textarea id="reviewCommentText" placeholder="Share your experience..." style="min-height:100px;"></textarea>
                </div>
                <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
                    <button class="btn btn-secondary" onclick="closeProjectReviewModal()" data-i18n="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="submitProjectReview()" data-i18n="submitReview">Submit Review</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Milestone Detail Modal -->
    <div id="milestoneDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="milestoneDetails">Milestone Details</h3>
                <button class="modal-close" onclick="closeMilestoneDetailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="milestone-detail-content"></div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="./assets/js/i18n-config.js"></script>
    
    <!-- Mock Backend (Pure Frontend) -->
    <script src="./assets/js/mock-backend.js"></script>
    <script src="./assets/js/api-adapter.js"></script>
    
    <!-- Modular JS Files -->
    <script src="./assets/js/modules/helpers-module.js"></script>
    <script src="./assets/js/modules/auth-module.js"></script>
    <script src="./assets/js/modules/navigation-module.js"></script>
    <script src="./assets/js/modules/plaza-module.js"></script>
    <script src="./assets/js/modules/messages-module.js"></script>
    <script src="./assets/js/modules/projects-module.js"></script>
    <script src="./assets/js/modules/profile-module.js"></script>
    <script src="./assets/js/modules/workbench-module.js"></script>
    
    <!-- Main Entry -->
    <script src="./assets/js/main.js"></script>
</body>
</html>
